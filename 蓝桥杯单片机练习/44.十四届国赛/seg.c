#include <STC15F2K60S2.H>

unsigned char code SMG[]={
0xc0, //0
0xf9, //1
0xa4, //2
0xb0, //3
0x99, //4
0x92, //5
0x82, //6
0xf8, //7
0x80, //8
0x90, //9
0xff,
0xbf, //-
0x8c, //P
0x8e, //E
};
unsigned char code wei[8]={0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80};

void Seg_Display(unsigned char i,j,k)
{
    P0=0xff;
    P2=P2&0x1f|0xe0;
    P2=P2&0x1f;

    P0=wei[i];
    P2=P2&0x1f|0xc0;
    P2=P2&0x1f;

    P0=SMG[j];
    if(k)
        P0&=0x7f;
    P2=P2&0x1f|0xe0;
    P2=P2&0x1f;
}