C51 COMPILER V9.60.7.0   ____________________                                              02/26/2024 15:55:53 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE ____________________
OBJECT MODULE PLACED IN .\Objects\³¤°´£¬¶Ì°´¼°Ë«»÷¶¯×÷.obj
COMPILER INVOKED BY: D:\Keil5\C51\BIN\C51.EXE ³¤°´£¬¶Ì°´¼°Ë«»÷¶¯×÷.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.
                    -\Listings\³¤°´£¬¶Ì°´¼°Ë«»÷¶¯×÷.lst) OBJECT(.\Objects\³¤°´£¬¶Ì°´¼°Ë«»÷¶¯×÷.obj)

line level    source

   1          #include <STC15F2K60S2.H>
   2          #include <Key.h>
   3          #include <Led.h>
   4          
   5          unsigned char led[8]={0,0,0,0,0,0,0,0};//ledçŠ¶æ€å­˜å‚¨
   6          unsigned char Seg_Pos,Key_Val,Key_Down,Key_Up,Key_Old,slow_down;
   7          bit key_flag;
   8                  
   9          /*å®šä¹‰å˜é‡*/
  10          unsigned int Key_Cnt_Flag = 0; //0â€”â€”åœæ­¢è®¡æ—¶
  11          
  12          
  13          
  14          
  15          
  16          
  17          /* é”®ç›˜å¤„ç†å‡½æ•° */
  18          void Key_Proc()
  19          {
  20   1              if(key_flag) return;
  21   1              key_flag = 1;//é”®ç›˜å‡é€Ÿç¨‹åº
  22   1      
  23   1              Key_Val = Key_Read();//å®æ—¶è¯»å–é”®ç å€¼
  24   1              Key_Down = Key_Val & (Key_Old ^ Key_Val);//æ•æ‰æŒ‰é”®ä¸‹é™æ²¿
  25   1              Key_Up = ~Key_Val & (Key_Old ^ Key_Val);//æ•æ‰æŒ‰é”®ä¸Šé™æ²¿
  26   1              Key_Old = Key_Val;//è¾…åŠ©æ‰«æå˜é‡
  27   1              
  28   1              
  29   1      
  30   1                      /*æŒ‰é”®é©±åŠ¨ä¸­*/
  31   1              if(Key_Down==4){
  32   2                      //if(Key_Cnt_Flag){     //å…ˆè¿›è¡Œåˆ¤æ–­åŒå‡»åŠ¨ä½œ
  33   2                              //led[2]^=1;//æ‰§è¡ŒåŒå‡»åŠ¨ä½œ
  34   2                              //Key_Cnt_Flag = 0;     //å¤ä½
  35   2                      //}
  36   2                      //else{
  37   2                              Key_Cnt_Flag = 1;       //å¼€å§‹è®¡æ—¶
  38   2                      //}
  39   2              }
  40   1      
  41   1      }
  42          
  43          void Timer0_Init(void)          //1æ¯«ç§’@12.000MHz
  44          {
  45   1              AUXR &= 0x7F;                   //å®šæ—¶å™¨æ—¶é’Ÿ12Tæ¨¡å¼
  46   1              TMOD &= 0xF0;                   //è®¾ç½®å®šæ—¶å™¨æ¨¡å¼
  47   1              TL0 = 0x18;                             //è®¾ç½®å®šæ—¶åˆå§‹å€¼
  48   1              TH0 = 0xFC;                             //è®¾ç½®å®šæ—¶åˆå§‹å€¼
  49   1              TF0 = 0;                                //æ¸…é™¤TF0æ ‡å¿—
  50   1              TR0 = 1;                                //å®šæ—¶å™¨0å¼€å§‹è®¡æ—¶
  51   1              EA=1;
  52   1              ET0=1;
  53   1      }
  54          
C51 COMPILER V9.60.7.0   ____________________                                              02/26/2024 15:55:53 PAGE 2   

  55          /* å®šæ—¶å™¨0ä¸­æ–­æœåŠ¡å‡½æ•° */
  56          void Timer0Server() interrupt 1
  57          {  
  58   1              slow_down++;slow_down%=200;
  59   1              if(slow_down%10==0) key_flag=0;
  60   1              
  61   1              if(++Seg_Pos == 8) Seg_Pos = 0;//æ•°ç ç®¡æ˜¾ç¤ºä¸“ç”¨
  62   1              Led_Disp(Seg_Pos,led[Seg_Pos]);
  63   1              
  64   1              
  65   1              /*1mså®šæ—¶å™¨ä¸­*/
  66   1      
  67   1              if(Key_Cnt_Flag){                               //é•¿æŒ‰è®¡æ—¶éƒ¨åˆ†
  68   2                      if(++Key_Cnt_Flag==1000){       //ä»¥è®¤ä¸º500æ¯«ç§’ä¸ºé•¿æŒ‰
  69   3                              Key_Cnt_Flag = 0;
  70   3                              //if(Key_Val){  //æ²¡æ¾æ‰‹
  71   3                                      led[0]^=1;//æ‰§è¡Œé•¿æŒ‰åŠ¨ä½œ
  72   3                              //}
  73   3                              //else{
  74   3                                      //led[1]^=1;//æ‰§è¡ŒçŸ­æŒ‰åŠ¨ä½œ
  75   3                              //}
  76   3                      }
  77   2              }
  78   1      
  79   1      }
  80          
  81          
  82          void main()
  83          {
  84   1              Timer0_Init();
  85   1              while(1)
  86   1              {
  87   2                      Key_Proc();
  88   2              }
  89   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    204    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
